================================================================================
                    GUIA DE DEPLOY - API Salexpress
================================================================================

üì¶ DEPLOY MANUAL NO FLY.IO
================================================================================

1. VERIFICAR BRANCH ATUAL
   $ git branch
   $ git checkout homolog-api  # ou a branch que voc√™ quer deployar

2. FAZER DEPLOY
   $ fly deploy

3. VER LOGS AP√ìS DEPLOY
   $ fly logs

4. VERIFICAR STATUS
   $ fly status

5. ABRIR APP NO NAVEGADOR
   $ fly open


üìã COMANDOS √öTEIS DO FLY.IO
================================================================================

# Listar todos os apps
$ fly apps list

# Deploy para um app espec√≠fico
$ fly deploy --app nome-do-app

# Ver logs em tempo real
$ fly logs -a nome-do-app

# Ver informa√ß√µes do app
$ fly status -a nome-do-app

# Acessar o console do app
$ fly ssh console -a nome-do-app

# Ver vari√°veis de ambiente
$ fly secrets list

# Adicionar vari√°vel de ambiente
$ fly secrets set NOME_VARIAVEL=valor

# Remover vari√°vel de ambiente
$ fly secrets unset NOME_VARIAVEL

# Escalar app (mudar m√°quina)
$ fly scale vm shared-cpu-1x --memory 256

# Reiniciar app
$ fly apps restart


üåø WORKFLOW DE BRANCHES
================================================================================

BRANCH HOMOLOG-API (Homologa√ß√£o/Testes)
----------------------------------------
1. Fazer mudan√ßas no c√≥digo
2. Commit e push:
   $ git add .
   $ git commit -m "feat: sua feature"
   $ git push origin homolog-api

3. Deploy manual:
   $ git checkout homolog-api
   $ fly deploy


BRANCH MAIN (Produ√ß√£o)
----------------------
1. Merge da homolog-api para main:
   $ git checkout main
   $ git merge homolog-api
   $ git push origin main

2. Deploy manual:
   $ git checkout main
   $ fly deploy --app nome-app-producao


‚ö†Ô∏è IMPORTANTE
================================================================================

‚ùå O Fly.io N√ÉO faz deploy autom√°tico ao fazer push
‚úÖ Voc√™ SEMPRE precisa rodar 'fly deploy' manualmente
‚úÖ Cada branch pode ter seu pr√≥prio app no Fly.io
‚úÖ O deploy usa o c√≥digo ATUAL da branch em que voc√™ est√°


üîß TROUBLESHOOTING
================================================================================

PROBLEMA: Deploy falhou
SOLU√á√ÉO: 
$ fly logs
$ fly status
# Verifique os logs e corrija os erros

PROBLEMA: App n√£o est√° respondendo
SOLU√á√ÉO:
$ fly status  # Ver se est√° rodando
$ fly apps restart  # Reiniciar

PROBLEMA: Erro de mem√≥ria
SOLU√á√ÉO:
$ fly scale vm shared-cpu-1x --memory 512  # Aumentar mem√≥ria

PROBLEMA: Vari√°vel de ambiente n√£o est√° funcionando
SOLU√á√ÉO:
$ fly secrets list  # Ver as secrets
$ fly secrets set NOME_VAR=valor  # Adicionar/atualizar


üìû LINKS √öTEIS
================================================================================

Dashboard Fly.io: https://fly.io/dashboard
Documenta√ß√£o: https://fly.io/docs
Status: https://status.flyio.net


üí° DICAS
================================================================================

‚úÖ Sempre teste na branch homolog-api antes de ir para main
‚úÖ Use 'fly logs' para debugar problemas
‚úÖ Mantenha as secrets sempre atualizadas
‚úÖ Documente mudan√ßas importantes no CHANGELOG
‚úÖ Verifique o status ap√≥s cada deploy

================================================================================
